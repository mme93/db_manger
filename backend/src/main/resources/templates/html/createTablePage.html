<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link th:href="@{/css/main.css}" rel="stylesheet"/>
    <link th:href="@{/css/createTablePage.css}" rel="stylesheet"/>
</head>
<body>

<div class="page_header">
    <h1 class="page_title" th:text="${title}"></h1>
</div>
<div style="background-color: #FFA500;color: black; margin-top: 5px">
    <span >Table Name:</span>
    <input type="text" style="width: 68%">
</div>
<table id="tableId">
    <tr>
        <th>Spaltenname</th>
        <th>Primary Key</th>
        <th>Is Nullable</th>
        <th>Default Wert</th>
        <th>Datentyp</th>
        <th>Extra</th>
        <th>Hinzufügen</th>
    </tr>
    <tr id="rowToAdd">
        <td><input type="text" name="columnName"></td>
        <td><input type="checkbox" name="primaryKey"></td>
        <td><input type="checkbox" name="isNullable"></td>
        <td><input type="text" name="defaultValue"></td>
        <td>
            <select name="dataType">
                <option value="INT">INT</option>
                <option value="VARCHAR">VARCHAR</option>
                <option value="DATE">DATE</option>
            </select>
        </td>
        <td>
            <select name="extra">
                <option value="">Kein Extra</option>
                <option value="AUTO_INCREMENT">AUTO_INCREMENT</option>
                <option value="UNIQUE">UNIQUE</option>
            </select>
        </td>
        <td><input type="button" value="Add" onclick="addRow()" style="width: 100%"></td>
    </tr>

</table>
<script type="text/javascript" th:inline="javascript">
    function addRow() {
        let row = document.getElementById("rowToAdd");
        let columns = row.querySelectorAll("td");
        let addDataRow = document.getElementById('tableId');
        let tr = document.createElement('tr');
        let values = {};
        columns.forEach(function (column) {
            var input = column.querySelector("input, select");
            if (input) {
                let td=document.createElement("td");
                let name = input.name;
                let object;
                let value;
                if (input.type === 'checkbox') {
                    value = input.checked;
                    object=document.createElement("span");
                    object.textContent=value;
                }else if (input.type === 'button') {
                    object=document.createElement("button");
                    object.textContent='Remove';
                } else {
                    value = input.value;
                    object=document.createElement("span");
                    object.textContent=value;
                }
                td.appendChild(object);
                tr.appendChild(td)

                values[name] = value;

                // Zurücksetzen des Eingabefelds auf seinen Standardwert
                if (input.type === "text") {
                    input.value = "";
                } else if (input.type === "checkbox") {
                    input.checked = false;
                } else if (input.tagName === "SELECT") {
                    input.selectedIndex = 0;
                }
            }
        });
        addDataRow.appendChild(tr)

    }

    function removeRow() {

    }
</script>
</body>
</html>
